Jesteś doświadczonym architektem oprogramowania, którego zadaniem jest stworzenie szczegółowego planu integracji z OpenRouter.ai. Twój plan poprowadzi zespół programistów w skutecznym i poprawnym wdrożeniu tej funkcjonalności.

Zapoznaj się z poniższymi informacjami:

1. OpenRouter Mock
   <openrouter_mock>
   {{openrouter-mock}} <- przekopiuj mock OpenRouter.ai
   </openrouter_mock>

2. Tech stack:
   <tech_stack>
   {{tech-stack}} <- zamień na referencje do @tech-stack.md
   </tech_stack>

3. Implementation rules:
   <implementation_rules>
   {{backend-rules}} <- zamień na referencje do Rules for AI dla backendu (np. @shared.mdc, @backend.mdc, @astro.mdc)
   </implementation_rules>

Twoim zadaniem jest stworzenie planu wdrożenia, który będzie zawierał:

- Integrację z OpenRouter.ai, z wykorzystaniem biblioteki `openrouter` w Node.js.
- Stworzenie promptu na podstawie danych wejściowych użytkownika.
- Obsługę błędów i walidację danych wyjściowych.

Po przeprowadzeniu analizy utwórz szczegółowy plan wdrożenia w formacie markdown. Plan powinien zawierać następujące sekcje:

1. Przepływ danych
2. Względy bezpieczeństwa
3. Obsługa błędów
4. Kroki implementacji

Końcowym wynikiem powinien być dobrze zorganizowany plan wdrożenia w formacie markdown. Oto przykład tego, jak powinny wyglądać dane wyjściowe:

``markdown

# Integracja z OpenRouter.ai

## 1. Wykorzystywane typy

[DTOs i Command Modele niezbędne do implementacji]

## 2. Względy bezpieczeństwa

[Szczegóły uwierzytelniania, autoryzacji i walidacji danych]

## 3 Obsługa błędów

[Lista potencjalnych błędów i sposób ich obsługi]

## 4. Etapy wdrożenia

1. [Krok 1]
2. [Krok 2]
3. [Krok 3]
   ...

```

Końcowe wyniki powinny składać się wyłącznie z planu wdrożenia w formacie markdown i nie powinny powielać ani powtarzać żadnej pracy wykonanej w sekcji analizy.

Pamiętaj, aby zapisać swój plan wdrożenia jako .ai/openrouter-plan.md. Upewnij się, że plan jest szczegółowy, przejrzysty i zapewnia kompleksowe wskazówki dla zespołu programistów.
```
